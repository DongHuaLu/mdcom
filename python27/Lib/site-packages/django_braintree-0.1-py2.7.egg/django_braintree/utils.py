



class Charge:
    payment_log = None
    is_success = False
    status = "Not Created"
    response_code = -1
    response_text = None
    reject_reason = None
    amount = -1
    message = ""
    result = None

    def __init__(self, result=None, user=None):
        from django_braintree.models import PaymentLog
        if result and user:
            self.amount = result.transaction.amount
            self.is_success = result.is_success
            self.status = result.transaction.status
            self.response_code = result.transaction.processor_response_code
            self.response_text = result.transaction.processor_response_text
            self.reject_reason = result.transaction.gateway_rejection_reason
            try:
                self.message = result.message
            except Exception:
                pass
            self.result = result
            if result.is_success:
                self.payment_log = PaymentLog.objects.create(user=user, amount=self.amount, transaction_id=result.transaction.id)
        



    